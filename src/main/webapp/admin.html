<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>管理员控制台 - UU云盘</title>
  <link rel="icon" href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><rect width='16' height='16' fill='%231976D2'/><text x='8' y='11' font-size='10' text-anchor='middle' fill='white'>A</text></svg>">
  <link rel="stylesheet" href="css/style.css">
  <style>
    body { font-family: Arial, Helvetica, sans-serif; margin:0; background:#f6f8fb; }
    .admin-header { background: #1976D2; color: #fff; padding:12px 20px; display:flex; align-items:center; justify-content:space-between; }
    .admin-header .title { font-size:18px; font-weight:700; }
    .admin-layout { display:flex; height:calc(100vh - 56px); }
    .admin-sidebar { width:220px; background:#fff; border-right:1px solid #eee; padding:12px; box-sizing:border-box; }
    .admin-main { flex:1; padding:18px; overflow:auto; }
    .nav-item { padding:10px 12px; border-radius:6px; cursor:pointer; color:#333; margin-bottom:6px; }
    .nav-item { position:relative; }
    .nav-item .sub-nav { display:none; margin-top:6px; margin-left:12px; }
    .nav-item.open .sub-nav { display:block; }
    .nav-item::after { content: '\25B6'; position:absolute; right:12px; transform:rotate(90deg); transition:transform .15s ease; }
    .nav-item.open::after { transform:rotate(180deg); }
    .nav-item.active { background:#e8f0fb; color:#0b63b8; font-weight:700; }
    .sub-item { padding-left:6px; margin-bottom:4px; }
    /* style for active sub-items under 信息管理 */
    .admin-sidebar .sub-item.active { background:#e8f0fb; color:#0b63b8; font-weight:700; padding:6px 8px; border-radius:6px; }
    .admin-sidebar .sub-item[role="button"] { cursor:pointer; }
    .panel { background:white; border-radius:8px; padding:12px; box-shadow:0 6px 18px rgba(0,0,0,0.04); }
    .toolbar { display:flex; gap:8px; margin-bottom:12px; }
    .btn { padding:8px 12px; border-radius:6px; border:0; cursor:pointer; }
    .btn-primary { background:#1976D2; color:white; }
    .btn-danger { background:#f44336; color:white; }
    table { width:100%; border-collapse:collapse; }
    th, td { padding:8px 10px; border-bottom:1px solid #f0f0f0; text-align:left; }
    th { background:#fafafa; font-weight:700; }
    .muted { color:#888; font-size:13px; }
    .small { font-size:13px; }
    .form-inline { display:flex; gap:8px; align-items:center; }
    .search { padding:8px; border:1px solid #ddd; border-radius:6px; }
    .notice { padding:10px; border-left:4px solid #1976D2; background:#fbfdff; margin-bottom:12px; }
    .flex { display:flex; gap:12px; align-items:center; }
    .user-avatar { width:32px; height:32px; border-radius:6px; overflow:hidden; }

    /* New styles for logout and improved file/user tables */
    .header-controls { display:flex; gap:10px; align-items:center; }
    .btn-ghost { background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.18); }
    .btn-logout { background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.18); padding:6px 10px; border-radius:6px; }

    /* file list improvements */
    .file-table th, .file-table td { padding:12px 10px; }
    .file-table td .owner-badge { display:inline-block; background:#eef6ff; color:#0b63b8; padding:4px 8px; border-radius:6px; font-size:12px; }
    .dir-link { color:#0b63b8; text-decoration:none; font-weight:600; }
    .dir-link:hover { text-decoration:underline; }
    .file-actions .btn { margin-right:6px; }
    .file-size { color:#666; font-size:13px; }
    .file-time { color:#999; font-size:12px; }

    /* styles for admin directory tree generated by admin.js */
    .dir-node { display:flex; align-items:center; gap:6px; padding:4px 6px; cursor:default; }
    .dir-node .dir-toggle { width:18px; display:inline-block; text-align:center; margin-right:6px; color:#666; }
    .dir-node .sub-item { flex:1; padding:6px 8px; border-radius:6px; cursor:pointer; }
    .dir-node.open .dir-toggle { font-weight:700; }
    .dir-children { padding-left:18px; }
    .dir-node:hover .sub-item { background:#fafafa; }

    @media (max-width:800px) { .admin-sidebar { display:none; } .admin-layout { height:auto; } }
  </style>
</head>
<body>
  <header class="admin-header">
    <div class="title">管理员控制台 - UU云盘</div>
    <div class="flex header-controls">
      <div class="muted" id="adminUserName">管理员</div>
      <button id="logoutBtn" class="btn btn-logout" title="退出登录">登出</button>
    </div>
  </header>

  <div class="admin-layout">
    <aside class="admin-sidebar">
      <!-- 将 公告 管理 移入 信息管理 子目录 -->
      <div class="nav-item open active" data-panel="info">
        信息管理
        <div class="sub-nav" style="margin-top:8px;">
          <!-- static action items -->
          <div class="sub-item" data-action="infoFiles" role="button" tabindex="0">用户文件</div>
          <div class="sub-item" data-action="infoLogs" role="button" tabindex="0">操作日志</div>
          <div class="sub-item" data-action="infoAnn" role="button" tabindex="0">公告管理</div>
        </div>
      </div>
      <div class="nav-item" data-panel="users">用户管理</div>
    </aside>

    <main class="admin-main">
      <div id="panel-announce" class="panel" style="display:none;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
          <div style="font-weight:700;">公告管理</div>
          <div class="flex">
            <input id="announceSearch" class="search" placeholder="搜索公告标题..." aria-label="搜索公告">
            <button class="btn btn-primary" id="newAnnBtn">新建公告</button>
          </div>
        </div>
        <div id="annList"></div>
      </div>

      <div id="panel-info" class="panel" style="margin-top:12px;">
        <div style="display:flex; gap:12px; margin-bottom:12px; align-items:center; justify-content:space-between;">
          <div>
            <div style="font-weight:700;">信息管理</div>
            <div style="margin-top:6px;" class="muted">管理网盘中的用户文件与操作日志</div>
          </div>
          <div style="flex:1; text-align:right;">
            <input id="infoSearch" class="search" placeholder="搜索..." aria-label="搜索信息">
          </div>
        </div>
        <div style="margin-bottom:8px;"><nav id="info-breadcrumb" aria-label="breadcrumb" style="font-size:13px; color:#555;"></nav></div>
        <div id="info-content">
          <!-- dynamic directory list (populated by admin.js based on current files) - adopt main page structure -->
          <ul class="sidebar-sub">
            <li>
              <div class="sidebar-item-with-toggle">
                <a href="javascript:void(0)" id="infoDirRoot">目录</a>
                <button id="infoDirToggle" class="toggle-btn" aria-label="Toggle">▾</button>
              </div>
              <ul id="infoDirChildren" class="sidebar-sub-children"></ul>
            </li>
          </ul>
        </div>
      </div>

      <div id="panel-users" class="panel" style="display:none; margin-top:12px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
          <div style="font-weight:700;">用户管理</div>
          <div>
            <input id="userSearch" class="search" placeholder="按用户名搜索" aria-label="搜索用户">
            <button class="btn btn-primary" id="newUserBtn">新建用户</button>
          </div>
        </div>
        <div id="userList"></div>
      </div>

    </main>
  </div>

  <!-- simple modal placeholder -->
  <div id="adminModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.4); align-items:center; justify-content:center;">
    <div style="background:white; border-radius:8px; padding:16px; width:720px; max-width:95%; box-shadow:0 8px 30px rgba(0,0,0,0.25);">
      <div id="adminModalBody"></div>
      <div style="display:flex; justify-content:flex-end; gap:8px; margin-top:12px;">
        <button class="btn" id="modalCancel">取消</button>
        <button class="btn btn-primary" id="modalOk">确定</button>
      </div>
    </div>
  </div>

  <script src="js/admin.js"></script>
</body>
</html>
